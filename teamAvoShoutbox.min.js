javascript:var shoutboxUtilities=function(){function o(){t=requestAnimationFrame(o);u()}function u(){var e="#shoutbox-shouts .name span";if(n.cycleChatColors){e+=", #shoutbox-shouts .shoutbox_text"}for(var t=0,r=$$(e);t<r.length;t++){var i=r[t];var s=i.getStyle("color").match(/rgb\((\d+),\s?(\d+),\s?(\d+)\)/);if(s&&s.length==4){var o=1;if(s[2]==0&&s[3]!=0&&s[3]!=255){o=3}else{for(var u=1;u<4;u++){if(s[u]!=0){o=u;break}}}var a=i.dataset.colorDir=i.dataset.colorDir||(Math.random()>.4?1:-1);if(o!=0){a>0?s[o]--:s[o]++;if(s[o]<0)s[o]=0;if(o==3)o=0;a>0?s[o+1]++:s[o+1]--;if(s[o+1]>255)s[o+1]=255;i.setStyle({color:"rgb("+s[1]+", "+s[2]+", "+s[3]+")"})}}else{i.setStyle({color:"rgb(255,255,255)"});console.log(i,"blah")}}}function a(e){if(!e.match(/^\//)){return false}return e.substring(1).split(" ")}(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})();Array.prototype.includes=function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return true}}return false};var e=0,t=0,n={},r=$("shoutbox-refresh-button");if(!shoutboxUtilities){$("shoutbox-refresh-button").parentElement.insert({bottom:"<div style='display: inline-block' class='input_submit alt' id='shoutboxEx-autoRefresh'>Auto-Refresh</div><div style='display: inline-block; margin-left: 4px;' class='input_submit alt'>Height: <input value='' style='width: 35px; border: 1px solid #888; color: #CCC; background: #111' type='text' id='shoutboxEx-heightIn'></div><div style='display: inline-block; margin-left: 4px;' class='input_submit alt' id='shoutboxEx-rainbowText'>Reading Rainbow</div>"});ipb.shoutbox._updateShouts=ipb.shoutbox.updateShouts;ipb.shoutbox.updateShouts=function(e){var t=0,r=0;n.originalPageTitle=n.originalPageTitle||document.title;if(e){clearInterval(t);t=setInterval(function(){if(document.title==n.originalPageTitle){document.title="[New Message!]"}else{document.title=n.originalPageTitle}if(!document.hasFocus&&r>4||document.hasFocus()){clearInterval(t);document.title=n.originalPageTitle}r++},5e3)}ipb.shoutbox._updateShouts(e)};ipb.shoutbox._submitShout=ipb.shoutbox.submitShout;ipb.shoutbox.submitShout=function(){var e=a(ipb.shoutbox.getShout());if(Object.keys(f).includes(e[0])){ipb.shoutbox.clearShout();f[e[0]](e.slice(1))}else{ipb.shoutbox._submitShout()}};ipb.shoutbox.produceError=function(e){var t="app";if(ipb.shoutbox.global_on){if(ipb.shoutbox.can_edit&&ipb.shoutbox.mod_in_action){t="editShout"}else{t="glb"}}else if(ipb.shoutbox.in_prefs){t="myprefs"}else if(ipb.shoutbox.in_mod){t="moderator"}else if(ipb.shoutbox.in_archive){t="archive"}if(ipb.shoutbox.errors[e]){e=ipb.shoutbox.errors[e]}if($("shoutbox-inline-error-"+t)){$("shoutbox-inline-error-"+t).update(e).show();var n=2e3;if(e.match("Shout flooding is enabled.")){var r=e.match(/\d+/)[0],i=0;i=setInterval(function(){r--;$("shoutbox-inline-error-"+t).update(e.replace(/\d+/,r));if(r==0){clearInterval(i)}},1e3);n=r*1e3}setTimeout("$('shoutbox-inline-error-"+t+"').hide()",n)}else{alert(e)}}}var i=$("shoutboxEx-autoRefresh");i.on("click",function(){if(e==0){n.startAutoRefresh()}else{n.stopAutoRefresh()}});var s=$("shoutboxEx-rainbowText");s.on("click",function(){if(t==0){n.startCyclingColor()}else{n.stopCyclingColor()}});$("shoutboxEx-heightIn").setValue($("shoutbox-shouts").getStyle("height").replace(/\D/g,"")).on("keyup",function(e,t){if(e.keyCode==Event.KEY_RETURN){n.setHeight(t.getValue())}});n.cycleChatColors=false;n.setShadyOverrides=function(){ipb.shoutbox._displayInactivePrompt=ipb.shoutbox.displayInactivePrompt;ipb.shoutbox.displayInactivePrompt=function(){}};n.setInterval=function(t){ipb.shoutbox.shouts_refresh=t||ipb.shoutbox.shouts_refresh;if(e!=0){n.startAutoRefresh()}};n.startAutoRefresh=function(){if(e!=0){n.stopAutoRefresh()}r.setStyle({visibility:"hidden",position:"absolute"});e=setInterval(function(){ipb.shoutbox.refreshShouts()},ipb.shoutbox.shouts_refresh);i.setStyle({color:"white"})};n.stopAutoRefresh=function(){clearInterval(e);r.setStyle({visibility:"",position:""});e=0;i.setStyle({color:""})};n.setHeight=function(e){e=e||132;$("shoutbox-shouts").setStyle({height:e+"px"})};n.startCyclingColor=function(){t=requestAnimationFrame(o);s.setStyle({color:"white"})};n.stopCyclingColor=function(){cancelAnimationFrame(t);t=0;s.setStyle({color:""})};n.postStatusMessage=function(e){ipb.shoutbox._updateShouts("<tr class='row1'><td colspan=3>"+e+"</td></tr>")};var f={noShow:["noShow","shadyoverrides"],help:function(){var e="Current commands are:<ul style='list-style: square; padding-left: 20px;'>";for(var t=0,r=Object.keys(f);t<r.length;t++){var i=r[t];if(!f.noShow.includes(i)){e+="<li>/"+i+"</li>"}}e+="</ul>";n.postStatusMessage(e)},hardcoremode:function(){n.cycleChatColors=!n.cycleChatColors;n.postStatusMessage("Hardcore Mode is now "+(n.cycleChatColors?"on":"off"))},shadyoverrides:function(){n.setShadyOverrides();n.postStatusMessage("Shady overrides set.")}};return n}()